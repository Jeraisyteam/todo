<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login and SMS Verification</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>


  <!-- The Modal -->
  <div id="loginModal" style="display: ;" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close" onclick="closeModal('loginModal')">&times;</span>
      <h2 class="box-head">بدء تسجيل الدخول او التسجيل لحجز الخدمة</h2>
      <div class="label-input">
        <label for="phone" class="label-phone">رقم الهاتف</label>
        <div class="phone-input-container">
          <select class="flag-dropdown" id="country-flag-dropdown" onchange="updateCountryCode()">
            <option value="+1" data-country-code="US">🇺🇸</option>
            <option value="+91" data-country-code="IN">🇮🇳</option>
            <option value="+966" data-country-code="SA" selected>SA</option>
          </select>
          <div class="vertical-line"></div>
          <span class="country-code" id="dial-code">+966</span>
          <div class="editable-part" contenteditable="true" id="editable-part"></div>
        </div>
      </div>
      <button type="submit" class="btn blue" onclick="showSmsVerification()">تسجيل الدخول</button>
      <!-- Close the modal when clicking on "تسجيل الدخول كزائر" button -->
      <button type="button" class="btn orange" onclick="closeModal('loginModal')">تسجيل الدخول كزائر</button>
      <p class="problem-text">نواجه مشكلة في تسجيل الدخول؟ <span class="problem-contact">اتصل بنا</span></p>
    </div>
  </div>

  <!-- SMS Verification Box -->
  <div id="smsVerificationModal" class="modal">

    <!-- Modal content -->
    <div class="new-modal-content">
      <span class="close" onclick="closeModal('smsVerificationModal')">&times;</span>
      <div class="new-content"></div>
      <h2 class="new-box-head">رمز التحقيق</h2>
      <p class="new-problem-text">الرجاء ادخال الرمز المرسل علي الرقم  966984987645 </p>
      <div class="new-verification-container">
        <input type="text" maxlength="1" pattern="[0-9]*" inputmode="numeric" class="new-verification-box" />
        <input type="text" maxlength="1" pattern="[0-9]*" inputmode="numeric" class="new-verification-box" />
        <input type="text" maxlength="1" pattern="[0-9]*" inputmode="numeric" class="new-verification-box" />
        <input type="text" maxlength="1" pattern="[0-9]*" inputmode="numeric" class="new-verification-box" />
      </div>
      <button type="submit" class="new-btn new-blue">تاكيد</button>
      <div class="new-one-line-p">
        <p class="new-problem-text">لم يصلك الكود. <span class="new-problem-contact">اعد ارسال الكود</span></p>
        <span class="new-problem-contact">تعديل رقم الجوال</span>
      </div>
    </div>
  </div>

  <script>
    // Function to close modal
    function closeModal(modalId) {
      var modal = document.getElementById(modalId);
      modal.style.display = "none";
    }

    // Function to show SMS verification modal
    function showSmsVerification() {
      closeModal('loginModal');
      var smsVerificationModal = document.getElementById('smsVerificationModal');
      smsVerificationModal.style.display = "block";
    }

    const newInputs = document.querySelectorAll('.new-verification-box');
    newInputs.forEach((newInput, index) => {
      newInput.addEventListener('keyup', (e) => {
        if (e.key >= 0 && e.key <= 9) {
          if (index !== newInputs.length - 1) {
            // Move to next input
            newInputs[index + 1].focus();
          }
        } else if (e.key === 'Backspace') {
          if (index !== 0) {
            // Move to previous input
            newInputs[index - 1].focus();
          }
        }
      });
    });
  </script>

  <script>
    var modal = null;

    function closeModal(modalId) {
      modal = document.getElementById(modalId);
      modal.style.display = "none";
    }

    function showSmsVerification() {
      closeModal('loginModal');
      modal = document.getElementById('smsVerificationModal');
      modal.style.display = "block";
    }

    function updateCountryCode() {
      var countryCode = document.getElementById('country-flag-dropdown').value;
      document.getElementById('dial-code').textContent = countryCode;
    }

    document.addEventListener('DOMContentLoaded', updateCountryCode);

    document.getElementById('country-flag-dropdown').addEventListener('change', updateCountryCode);

    var editablePart = document.getElementById('editable-part');

    editablePart.addEventListener('focus', function () {
      window.getSelection().selectAllChildren(this);
      window.getSelection().collapseToEnd();
    });

    editablePart.addEventListener('input', function (e) {
      var digitOnlyContent = this.innerText.replace(/\D/g, '');
      digitOnlyContent = digitOnlyContent.substring(0, 10);
      if (this.innerText !== digitOnlyContent) {
        this.innerText = digitOnlyContent;
        window.getSelection().selectAllChildren(this);
        window.getSelection().collapseToEnd();
      }
    });

    editablePart.addEventListener('keydown', function (e) {
      if (!e.key.match(/[0-9]/) && e.key !== 'Backspace' && e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'Delete' && e.key !== 'Tab') {
        e.preventDefault();
      }
    });
  </script>
</body>

</html>
